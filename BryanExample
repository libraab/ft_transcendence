import { writable } from 'svelte/store';
import { browser } from '$app/environment';
import type { IuserInformation } from '$lib/user/user.interface';

const persitedJwt = browser ? localStorage.getItem('jwt') : "";
export const jwt = writable(persitedJwt);

const persitedAdminUrl = browser ? localStorage.getItem('adminUrl') : "";
export const adminUrl = writable(persitedAdminUrl);

const persitedUser = browser ? localStorage.getItem('user') : {};
export const user = writable<IuserInformation>(persitedUser as IuserInformation);

jwt.subscribe((value) => {
	if (browser) {
		window.localStorage.setItem('jwt', value as string);
	}
});

adminUrl.subscribe((value) => {
	if (browser) {
		window.localStorage.setItem('adminUrl', value as string);
	}
});

user.subscribe((value: any) => {
	if (browser) {
		window.localStorage.setItem('user', value);
	}
})